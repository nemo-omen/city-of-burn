{
  "version": 3,
  "sources": ["../src/socket-handler.ts"],
  "sourcesContent": ["import { Server } from 'socket.io';\nimport { Game } from '@city-of-burn/core';\nexport const initialMessages = [\n\t{\n\t\ttype: 'description',\n\t\tfrom: 'game',\n\t\tmessage:\n\t\t\t'The murmur of bustling passengers wakes you from an uncomfortable sleep. The air smells of saltwater, sweat, and rust.'\n\t},\n\t{\n\t\ttype: 'description',\n\t\tfrom: 'game',\n\t\tmessage:\n\t\t\t\"You open your eyes and see the low metal ceiling of the ferry's passenger compartment. Somewhere nearby a child starts to cry.\"\n\t},\n\t{\n\t\ttype: 'dialog',\n\t\tfrom: 'A gnarly old man',\n\t\tmessage: \"You gonna lay there takin' up those seats all day?\"\n\t},\n\t{\n\t\ttype: 'description',\n\t\tfrom: 'game',\n\t\tmessage:\n\t\t\t\"You turn your head and wince from the pain of sleeping on the ferry's hard bench. An old man, beard uneven and, at most, three teeth stands nearby and stares at you.\"\n\t},\n\t{\n\t\ttype: 'description',\n\t\tfrom: 'game',\n\t\tmessage: 'You stand up.'\n\t}\n];\n\nexport function startSocketServer(server) {\n\tconst io = new Server(server, {\n\t\tcors: {\n\t\t\torigin: '*'\n\t\t}\n\t});\n\n\tconst game = new Game();\n\n\tgame.Updated.on((data: unknown) => console.log('Data emitted from Game onupdate event: ', data));\n\n\tgame.update({ hello: 'world' });\n\n\tio.on('connection', (socket) => {\n\t\tconsole.log('Connected socket: ', socket.id);\n\n\t\tsocket.on('demo-game-init', (character) => {\n\t\t\tcharacter.socketId = socket.id;\n\n\t\t\tgame.join(character);\n\n\t\t\t// console.log(game);\n\t\t\tinitialMessages.forEach((msg) => {\n\t\t\t\tsocket.emit('game-message', msg);\n\t\t\t});\n\t\t});\n\n\t\tsocket.on('command', (message, callback) => {\n\t\t\tconsole.log(`Command received from: `, message.characterId);\n\t\t\tgame.parseCommand(message.command);\n\t\t\tcallback({\n\t\t\t\tok: true,\n\t\t\t\tstatus: 200\n\t\t\t});\n\t\t});\n\n\t\tsocket.on('disconnect', () => {\n\t\t\tgame.disconnectSocket(socket.id);\n\t\t});\n\n\t});\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAuB;AACvB,kBAAqB;AACd,MAAM,kBAAkB;AAAA,EAC9B;AAAA,IACC,MAAM;AAAA,IACN,MAAM;AAAA,IACN,SACC;AAAA,EACF;AAAA,EACA;AAAA,IACC,MAAM;AAAA,IACN,MAAM;AAAA,IACN,SACC;AAAA,EACF;AAAA,EACA;AAAA,IACC,MAAM;AAAA,IACN,MAAM;AAAA,IACN,SAAS;AAAA,EACV;AAAA,EACA;AAAA,IACC,MAAM;AAAA,IACN,MAAM;AAAA,IACN,SACC;AAAA,EACF;AAAA,EACA;AAAA,IACC,MAAM;AAAA,IACN,MAAM;AAAA,IACN,SAAS;AAAA,EACV;AACD;AAEO,SAAS,kBAAkB,QAAQ;AACzC,QAAM,KAAK,IAAI,qBAAO,QAAQ;AAAA,IAC7B,MAAM;AAAA,MACL,QAAQ;AAAA,IACT;AAAA,EACD,CAAC;AAED,QAAM,OAAO,IAAI,iBAAK;AAEtB,OAAK,QAAQ,GAAG,CAAC,SAAkB,QAAQ,IAAI,2CAA2C,IAAI,CAAC;AAE/F,OAAK,OAAO,EAAE,OAAO,QAAQ,CAAC;AAE9B,KAAG,GAAG,cAAc,CAAC,WAAW;AAC/B,YAAQ,IAAI,sBAAsB,OAAO,EAAE;AAE3C,WAAO,GAAG,kBAAkB,CAAC,cAAc;AAC1C,gBAAU,WAAW,OAAO;AAE5B,WAAK,KAAK,SAAS;AAGnB,sBAAgB,QAAQ,CAAC,QAAQ;AAChC,eAAO,KAAK,gBAAgB,GAAG;AAAA,MAChC,CAAC;AAAA,IACF,CAAC;AAED,WAAO,GAAG,WAAW,CAAC,SAAS,aAAa;AAC3C,cAAQ,IAAI,2BAA2B,QAAQ,WAAW;AAC1D,WAAK,aAAa,QAAQ,OAAO;AACjC,eAAS;AAAA,QACR,IAAI;AAAA,QACJ,QAAQ;AAAA,MACT,CAAC;AAAA,IACF,CAAC;AAED,WAAO,GAAG,cAAc,MAAM;AAC7B,WAAK,iBAAiB,OAAO,EAAE;AAAA,IAChC,CAAC;AAAA,EAEF,CAAC;AACF;",
  "names": []
}
